@use "sass:math";

@import '../../../node_modules/bootstrap/scss/functions';

/**
 *
 * DEFAULTS (COPY & PASTED)
 *
 */

$white:    #fff !default;
$gray-100: #f8f9fa !default;
$gray-200: #e9ecef !default;
$gray-300: #dee2e6 !default;
$gray-400: #ced4da !default;
$gray-500: #adb5bd !default;
$gray-600: #6c757d !default;
$gray-700: #495057 !default;
$gray-800: #343a40 !default;
$gray-900: #212529 !default;
$black:    #000 !default;

$grays: (
  "100": $gray-100,
  "200": $gray-200,
  "300": $gray-300,
  "400": $gray-400,
  "500": $gray-500,
  "600": $gray-600,
  "700": $gray-700,
  "800": $gray-800,
  "900": $gray-900
) !default;

$blue:    #0d6efd !default;
$indigo:  #6610f2 !default;
$purple:  #6f42c1 !default;
$pink:    #d63384 !default;
$red:     #dc3545 !default;
$orange:  #fd7e14 !default;
$yellow:  #ffc107 !default;
$green:   #198754 !default;
$teal:    #20c997 !default;
$cyan:    #0dcaf0 !default;

$primary:       $blue !default;
$secondary:     $gray-600 !default;
$success:       $green !default;
$info:          $cyan !default;
$warning:       $yellow !default;
$danger:        $red !default;
$light:         $gray-100 !default;
$dark:          $gray-900 !default;

$spacer: 1rem !default;
$spacers: (
  0: 0,
  1: $spacer * .25,
  2: $spacer * .5,
  3: $spacer,
  4: $spacer * 1.5,
  5: $spacer * 3,
) !default;

/**
 *
 * CUSTOM
 *
 */

$link-decoration:       none;
$link-hover-decoration: none;

// Colors

// Darken all colors
$blue:   darken($blue,   15%);
$indigo: darken($indigo, 15%);
$purple: darken($purple, 15%);
$pink:   darken($pink,   15%);
$red:    darken($red,    15%);
$orange: darken($orange, 15%);
$yellow: darken($yellow, 15%);
$green:  darken($green,  15%);
$teal:   darken($teal,   15%);
$cyan:   darken($cyan,   15%);

$colors: (
  "blue":       $blue,
  "indigo":     $indigo,
  "purple":     $purple,
  "pink":       $pink,
  "red":        $red,
  "orange":     $orange,
  "yellow":     $yellow,
  "green":      $green,
  "teal":       $teal,
  "cyan":       $cyan,
  "white":      $white,
  "gray":       $gray-600,
  "gray-dark":  $gray-800
) !default;

// Default theme colors
$primary:   $orange;
$secondary: $gray-600;
$success:   $green;
$info:      $cyan;
$warning:   $yellow;
$danger:    $red;
$light:     $gray-400;
$lighter:   lighten($light, 5%);
$dark:      $gray-800;
$darker:    darken($dark, 5%);

$theme-colors: (
  "primary":   $primary,
  "secondary": $secondary,
  "success":   $success,
  "info":      $info,
  "warning":   $warning,
  "danger":    $danger,
  "light":     $light,
  "lighter":   $lighter,
  "dark":      $dark,
  "darker":    $darker
);
$theme-colors: map-merge($theme-colors, $grays);
$theme-colors: map-merge($theme-colors, $colors);
$theme-colors: map-merge($theme-colors, (
  "bootstrap": #533B78,
  "docker": #2396ED,
  "fontawesome": #339AF0,
  "git": #F03C2E,
  "github": #222222,
  "go": #00ACD7,
  "gremlin": #67B643,
  "java": #FFA518,
  "kubernetes": #316CE6,
  "metalsmith": #262727,
  "mysql": #2C7493,
  "node": #679E63,
  "postgres": #336791
));

$table-bg-scale: -60%;
$table-variants: map-loop($theme-colors, shift-color, "$value", $table-bg-scale);
$table-striped-order: even;

$headings-color: $dark;

$link-color:       $primary; // default
$link-hover-color: darken($link-color, 5%);

$code-color: $gray-900;
$code-bg:    $gray-500;

// Use $light as the main color, then derive all others
$navbar-dark-active-color:         $light;
$navbar-dark-color:                rgba($navbar-dark-active-color, .75);
$navbar-dark-hover-color:          rgba($navbar-dark-active-color, 1);
$navbar-dark-disabled-color:       rgba($navbar-dark-active-color, .50);
$navbar-dark-toggler-icon-bg:      str-replace(url("data:image/svg+xml,%3csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3e%3cpath stroke='#{$navbar-dark-color}' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e"), "#", "%23");
$navbar-dark-toggler-border-color: rgba($navbar-dark-active-color, .50);
$navbar-dark-brand-color:          $navbar-dark-color;
$navbar-dark-brand-hover-color:    $navbar-dark-active-color;

// Add more spacer sizes
$spacers: map-merge($spacers, (
  6: ($spacer * 4.5)
));

$headings-margin-bottom: $spacer; // larger

// Vertical length of 0, darker
$box-shadow-sm: 0 0 .25rem rgba($black, .15);
$box-shadow:    0 0 1rem rgba($black, .3);
$box-shadow-lg: 0 0 3rem rgba($black, .35);

$badge-font-weight: normal; // not bold

$pagination-color:                 $primary;
$pagination-bg:                    darken($light, 10%);
$pagination-border-color:          darken($pagination-bg, 10%);
$pagination-hover-color:           darken($pagination-color, 15%);
$pagination-hover-bg:              $gray-200;
$pagination-hover-border-color:    $pagination-border-color;
$pagination-active-color:          $pagination-bg;
$pagination-active-bg:             $pagination-color;
$pagination-active-border-color:   $pagination-active-bg;
$pagination-disabled-color:        $gray-600;
$pagination-disabled-bg:           $pagination-bg;
$pagination-disabled-border-color: $pagination-border-color;

@import '../../../node_modules/bootstrap/scss/bootstrap';

// TODO: underline on link hover, maybe only when not link-dark?



$navbar-height: 64px;

@import "utilities/borders";
@import "utilities/code";
@import "utilities/hljs";
@import "utilities/markdown";
@import "utilities/position";
@import "utilities/sizes";
@import "utilities/spacing";
@import "utilities/text";



// Fonts

body {
  font-family: 'Open Sans', sans-serif;
}

.navbar-brand {
  font-family: 'Montserrat', sans-serif;
  font-weight: 600;
  text-transform: uppercase;
}

// Global styling

*,
*::before,
*::after {
  transition: $transition-base;
}

p, ul,
h1, h2, h3, h4, h5, h6,
.h1, .h2, .h3, .h4, .h5, .h6 {
  &:first-child {
    margin-top: 0;
  }
  :not(li) > &:last-child {
    margin-bottom: 0;
  }
}

.bg-trianglify {
  background-image: url('../img/trianglify.svg');
  background-position: center center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-size: auto 150%;
  @media (min-aspect-ratio: 1/1) {  // wide
    background-size: 150% auto;
  }
  // The background performs VERY poorly on mobile, at least Firefox ~v83 - use rasterized versions instead
  @media only screen and (orientation: landscape) and (max-device-width: 1024px),
         only screen and (orientation: portrait) and (max-device-height: 1024px) {
    background-image: url('../img/trianglify-1024.jpg');
  }
  @media only screen and (orientation: landscape) and (max-device-width: 926px),
         only screen and (orientation: portrait) and (max-device-height: 926px) {
    background-image: url('../img/trianglify-926.jpg');
  }
  @media only screen and (orientation: landscape) and (max-device-width: 896px),
         only screen and (orientation: portrait) and (max-device-height: 896px) {
    background-image: url('../img/trianglify-896.jpg');
  }
  @media only screen and (orientation: landscape) and (max-device-width: 736px),
         only screen and (orientation: portrait) and (max-device-height: 736px) {
    background-image: url('../img/trianglify-736.jpg');
  }
}

// Head and footer

// Make sure navbar is clickable / on top, and that page-progress is on top of that
.navbar {
  z-index: 1;
}
.navbar ~ .progress {
  z-index: 2;
}

// Navbar height
.navbar {
  .navbar-brand img {
    height: $navbar-height - 26px;
  }
}
.navbar-spacer {
  height: $navbar-height;
  z-index: -1;
  & + * {
    margin-top: $navbar-height !important;
  }
  @each $size, $length in $spacers {
    & + .m-#{$size},
    & + .my-#{$size},
    & + .mt-#{$size} {
      margin-top: math.div($navbar-height, 16px) + $length !important;
    }
  }
}
.navbar-nspacer {
  margin-top: -$navbar-height;
}

// Navbar spacing and active item underline
.navbar-expand {
  @each $breakpoint in map-keys($grid-breakpoints) {
    $next: breakpoint-next($breakpoint, $grid-breakpoints);
    $infix: breakpoint-infix($next, $grid-breakpoints);
    &#{$infix} {
      @include media-breakpoint-up($next) {
        .navbar-nav {
          .nav-link {
            margin: 0 math.div($navbar-nav-link-padding-x, 2);
          }
        }
      }
    }
  }
}
.navbar-dark {
  .navbar-nav {
    .nav-link {
      &.nav-link-underline {
        position: relative;
        &::after {
          content: "";
          display: block;
          position: absolute;
          bottom: 0;
          left: 0;
          width: 0;
          height: $border-width*2;
          background: $navbar-dark-active-color;
        }
      }
    }
    .nav-link:hover,
    .nav-link:focus,
    .show > .nav-link,
    .active > .nav-link,
    .nav-link.show,
    .nav-link.active {
      &.nav-link-underline::after {
        width: 100%;
      }
    }
  }
}

.footer {
  color: $navbar-dark-color;
  a {
    color: $navbar-dark-color;
    &:hover,
    &:focus {
      color: $navbar-dark-hover-color;
    }
    &.disabled {
      color: $navbar-dark-disabled-color;
    }
  }
}

// Text

.text-shadow-sm { text-shadow: $box-shadow-sm !important; }
.text-shadow { text-shadow: $box-shadow !important; }
.text-shadow-lg { text-shadow: $box-shadow-lg !important; }
.text-shadow-none { text-shadow: none !important; }

// Custom styles

// https://codepen.io/2xsamurai/pen/WwmjKQ
// Usage: <div class="mouse-scroll"><div><div></div></div></div>
.mouse-scroll {
  width: 37px;
  height: 59px;
}
.mouse-scroll > * {
  width: 3px;
  padding: 10px 15px;
  height: 35px;
  border: 2px solid $light;
  border-radius: 25px;
  opacity: 0.75;
  box-sizing: content-box;
}
.mouse-scroll > * > * {
  width: 3px;
  height: 10px;
  border-radius: 25%;
  background-color: $light;
  animation-name: scroll;
  animation-duration: 2.2s;
  animation-timing-function: cubic-bezier(.15,.41,.69,.94);
  animation-iteration-count: infinite;
}
@keyframes scroll {
  0% { opacity: 0; }
  10% { transform: translateY(0); opacity: 1; }
  100% { transform: translateY(15px); opacity: 0; }
}
